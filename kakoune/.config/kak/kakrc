# kakrc


# ui_options
colorscheme base16-ocean
set global ui_options ncurses_enable_mouse=false:ncurses_assistant=cat


# global options
set global autoreload ask
set global indentwidth 4
set global scrolloff 1,5
set global tabstop 4


# bindings - user
map global user c ':comment-line<ret>'
map global user q ':bp<ret>'
map global user w ':bn<ret>'
map global user = '<a-i>w:spell-replace<ret>'
map global user <ret> ':lint<ret>'
map global user n ':lint-next<ret>'
map global user b ':lint-prev<ret>'

map global user f '|fmt -w 80<ret>:echo -color LineNumberCursor [sel] | fmt -w 80<ret>'
map global user s '|sort -bn<ret>:echo -color LineNumberCursor [sel] | sort -bn<ret>'

map global user p '!xsel<ret>:echo -color LineNumberCursor [sel] += xsel<ret>'


# hooks - run-of-the-mill
hook global WinCreate .* %{
    addhl number_lines -relative -hlcursor -separator " | "
    addhl show_matching
}
hook global NormalKey [/?*nN]|<a-[/?*nN]> %{ try %{
    addhl dynregex '%reg{/}' 0:Search
}}
hook global NormalKey <esc> %{ try %{
    rmhl dynregex_%reg{<slash>}
}}
hook global InsertChar \t %{
    exec -draft -itersel h@
}
hook global InsertKey <backspace> %{ try %{
    exec -draft hGh<a-k>\A\h+\Z<ret><lt>
}}


# see: autoload/selection-persist.kak
hook global BufWritePre .* %{ save-selection }
map global normal <c-r> ':restore-selection<ret>'
